---
import BaseLayout from '@layouts/BaseLayout.astro';
import { fallbackLang } from '@lib/i18n';
const lang = fallbackLang();
const BASE = (import.meta.env.BASE_URL || '/').replace(/\/?$/, '/');
---
<BaseLayout title="Istanbul Private Tours" lang={lang}>
  <script define:vars={{ BASE }}>
    const supported = ["tr","en","pl"];
    try {
      const stored = localStorage.getItem('lang');
      const navLang = stored || (navigator.language || 'tr').slice(0,2);
      const to = supported.includes(navLang) ? `${BASE}${navLang}` : `${BASE}tr`;
      if (location.pathname === BASE && to !== BASE) location.replace(to);
    } catch {}
  </script>
  <div class="container-max py-16">
    <h1 class="text-3xl font-semibold mb-6">Select Language / Dil Seçimi / Wybierz język</h1>
    <div class="flex gap-4">
      <a class="px-4 py-2 border rounded hover:bg-primary-50" href={`${BASE}tr`}>Türkçe</a>
      <a class="px-4 py-2 border rounded hover:bg-primary-50" href={`${BASE}en`}>English</a>
      <a class="px-4 py-2 border rounded hover:bg-primary-50" href={`${BASE}pl`}>Polski</a>
    </div>
  </div>
</BaseLayout>
